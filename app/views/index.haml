- ###################################################
- ###################################################
- ##            ____          __                   ##
- ##           /  _/___  ____/ /__  _  __          ##
- ##           / // __ \/ __  / _ \| |/_/          ##
- ##         _/ // / / / /_/ /  __/>  <            ##
- ##        /___/_/ /_/\__,_/\___/_/|_|            ##
- ##                                               ##
- ###################################################
- ###################################################
- ## Gives us a single page from which to manage   ##
- ## underlying functionality for the system.      ##
- ###################################################
- ###################################################

- # User Information
- # Expected to be signed in
%h4 Authentication
%h6 Connect to HMRC and define your credentials...
= form_for current_user, '/user', data: { parsley: {validate: 'true', trigger: 'keyup', required: {message: "Required"}}} do |f|
  - if @user.try(:errors)
    - @user.errors.full_messages.each do |message|
      = message
  = f.text_field :name, placeholder: "Tax Entity Name"
  = f.text_field :vtr, placeholder: "VAT Number"
  = f.submit

- # Authentication
- # Used to provide the oAuth connectivity to HMRC
= button_to "Authenticate", "https://www.google.com", disabled: current_user.authenticated?

- # HR
%hr

- # Returns
- # These show the user which returns they have available, and which they need to submit
%h4 Returns
- if @returns.any?
  - @returns.each do |r|
    = r.periodKey
- else
  No Returns!

- ###################################################
- ###################################################
